"use strict";(function(a,b){if(typeof define==="function"&&define.amd){define([],b)}else{if(typeof exports==="object"){module.exports=b()}else{a.storage=b()}}})(this,function(){var f="storage-global";var i=f+"-index";var m=location.hostname;var o=location.pathname;var l=location.hash.slice(1);var k=null;function n(){return c()}function c(){if(k){return k}if("localStorage" in window){try{window.localStorage.setItem("_tmptest","tmpval");window.localStorage.removeItem("_tmptest");k=window.localStorage}catch(x){}}if(!k&&"sessionStorage" in window){try{window.sessionStorage.setItem("_tmptest","tmpval");window.sessionStorage.removeItem("_tmptest");k=window.sessionStorage}catch(x){}}if(k){return k}var y=document.createElement("link");if(y.addBehavior){y.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(y);k={setItem:function(z,A){y.setAttribute("key",A);y.save(f)},getItem:function(z){y.load(f);return y.getAttribute(z)},removeItem:function(z){y.load(f);y.removeAttribute(z);y.save(f)}};return k}y=null;return null}function d(y,z,x,A){y=u(y,A);r(y,x);e(y,z)}function h(y,z){y=u(y,z);var x=q(y);if(x&&x>(new Date().getTime())){return v(y)}w(y);e(y,null);return null}function t(x,y){x=u(x,y);w(x);e(x,null)}function p(A){A=A?A:m;var z=b();var x=z[A];for(var y in x){if(x.hasOwnProperty(y)){delete x[y];e(y,null)}}delete z[A]}function a(){var z=b();for(var A in z){if(z.hasOwnProperty(A)){var x=z[A];for(var y in x){if(x.hasOwnProperty(y)){delete x[y];e(y,null)}delete z[A]}}}}function g(){var z=b();var A=[];for(var B in z){if(z.hasOwnProperty(B)){var x=z[B];for(var y in x){if(x.hasOwnProperty(y)){A.push(y.split("@")[1])}}}}return A}function e(x,y){c();if(k){if(y){if(!j(y)){y=JSON.stringify(y)}k.setItem(x,y)}else{k.removeItem(x)}}}function v(x){c();if(k){return k.getItem(x)}return null}function u(x,y){return m+o+"#"+(y?y:l)+"@"+x}function b(){var x=v(i);return JSON.parse(x)}function r(z,y){y=y?y:Number.MAX_VALUE;var A=b();var x=A[m];if(x){x[z]=y}else{A[m]={key:y}}e(i,JSON.stringify(A))}function w(y){var z=b();var x=z[m];if(x&&x[y]){delete x[y]}e(i,JSON.stringify(z))}function q(y){var z=b();var x=z[m];return x?x[y]:null}function j(x){return Object.prototype.toString.call(x).slice(8,-1)==="String"}var s={available:n,setItem:d,getItem:h,removeItem:t,clear:p,clearAll:a,index:g};return s});